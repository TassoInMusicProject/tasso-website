
{% include_relative sorting-functions.html %}

<script>
// vim: ts=3 ft=javascript

var PITCHQUERY = "";
var RHYTHMQUERY = "";
var INTERVALQUERY = "";
var REPERTORY = "";
var FIRSTTIME = 1;

//////////////////////////////
//
// Function called when document has finished loading:
//

document.addEventListener("DOMContentLoaded", function() {
	CGI = GetCgiParameters();
	HighlightNavigationBar();
	loadLyricIndex();

	$("#pitch").focus(function() {
		$(this).data("hasfocus", true);
	});

	$(document.body).keyup(function(event) {
		hideMusicSearchCopyLink();
		//if (event.which == EnterKey) {
		// Require pressing the search button for now:
		/*
			if ($("#pitch:focus")) {
				doMusicSearch();
			} else if ($("#interval:focus")) {
				doMusicSearch();
			} else if ($("#rhythm:focus")) {
				doMusicSearch();
			}
		*/
		//}
	});

	/*
	var searchbutton = document.querySelector("#searchButton");
	if (searchbutton) {
		searchbutton.addEventListener("click", function() {
			console.log("DOING SEARCH");
			doMusicSearch();
		});
	}
	*/

	LoadTassoData(doActions);
});



function doActions() {
   PrepareGlobalTassoObjects();
	console.warn("Window location hash" , window.location.hash);
	if (window.location.hash === "#lyrics") {
		CGI.text = "";
		displayTextSearch();
	} else if (CGI.text) {
		displayTextSearch();
	} else {
		displayMusicSearch();
	}
}





</script>

