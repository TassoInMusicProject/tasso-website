<script>
// vim: ts=3 ft=javascript
//


//////////////////////////////
//
// DOMContentLoaded event listener --
//

document.addEventListener("DOMContentLoaded", function() {
	var cgi = GetCgiParameters();
   if (cgi.rime) {
		Rime = cgi.rime;
	   displayLiterarySources(Rime, "#contents");
   } else if (cgi.id) {
		var matches = cgi.id.match(/Trm(\d+)/);
		if (matches) {
			Rime = matches[1];
	   	displayLiterarySources(Rime, "#contents");
		} else {
	   	displayLiterarySources(0, "#contents");
		}
   } else {
	   displayLiterarySources(0, "#contents");
   }
});



//////////////////////////////
//
// keydown event listener --
//

window.addEventListener('keydown', function(event) {
   if (event.metaKey) {
		return;
	}

	switch (event.keyCode) {
		case LeftArrowKey:
			if (event.shiftKey) {
				displaySetting();
			} else {
				displayPreviousSource();
			}
			break;
		case RightArrowKey:
			if (event.shiftKey) {
				displayVariant();
			} else {
				displayNextSource();
			}
			break;
		case UpArrowKey:
   		window.location = "/sources";
			break;
	}
});


</script>
