#!/usr/local/bin/perl
# vim: ts=3

use strict;

my $output = "";
my @contents = <>;
my $year;
my $id;
foreach my $line (@contents) {
	chomp $line;
	if ($line =~ /^\@CATALOGNUM\s*:\s*(.*)\s*$/) {
		$id = $1;
	}
	if ($line =~ /^\@PRINCEPSYEAR\s*:\s*(.*)\s*$/) {
		$year = $1;
		if ($year =~ /\b(\d{4})\b/) {
			$year = $1;
		} else {
			$year = "";
		}
	}
	if ($line =~ /^\@\@END:\s*SETTING\s*$/) {
		if (($id ne "") && ($year ne "")) {
			$output .= "\n\t{\"ID\": \"$id\", \"PDT\": $year},";
		}
		$id = "";
		$year = "";
	}
}
$output =~ s/,$//;
print "[$output\n]\n";



