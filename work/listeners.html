<script>
// vim: ts=3

//////////////////////////////
//
// DOMContentLoaded event listener --
//

document.addEventListener("DOMContentLoaded", function() {
	vrvToolkit = new verovio.toolkit();
	HighlightNavigationBar();
	var cgi = GetCgiParameters();
	ID = cgi.id;
	loadWorkList("{{site.worklist}}");
	CheckLocalStorage();
});



//////////////////////////////
//
// keydown event listener --
//

window.addEventListener('keydown',
	function(event) {
		if (event.metaKey) {
			return;
		}

		switch (event.keyCode) {

			case ZeroKey:
				PART_FILTER = 0;
				initializeVerovioNotation();
				break;

			case OneKey:
				if (PART_FILTER == 1) {
					PART_FILTER = 0;
				} else {
					PART_FILTER = 1;
				}
				initializeVerovioNotation();
				break;

			case TwoKey:
				if (PART_FILTER == 2) {
					PART_FILTER = 0;
				} else {
					PART_FILTER = 2;
				}
				initializeVerovioNotation();
				break;

			case ThreeKey:
				if (PART_FILTER == 3) {
					PART_FILTER = 0;
				} else {
					PART_FILTER = 3;
				}
				initializeVerovioNotation();
				break;

			case FourKey:
				if (PART_FILTER == 4) {
					PART_FILTER = 0;
				} else {
					PART_FILTER = 4;
				}
				initializeVerovioNotation();
				break;

			case FiveKey:
				if (PART_FILTER == 5) {
					PART_FILTER = 0;
				} else {
					PART_FILTER = 5;
				}
				initializeVerovioNotation();
				break;

			case SixKey:
				if (PART_FILTER == 6) {
					PART_FILTER = 0;
				} else {
					PART_FILTER = 6;
				}
				initializeVerovioNotation();
				break;

			case SevenKey:
				if (PART_FILTER == 7) {
					PART_FILTER = 0;
				} else {
					PART_FILTER = 7;
				}
				initializeVerovioNotation();
				break;

			case EightKey:
				if (PART_FILTER == 8) {
					PART_FILTER = 0;
				} else {
					PART_FILTER = 8;
				}
				initializeVerovioNotation();
				break;

			case NineKey:
				if (PART_FILTER == 9) {
					PART_FILTER = 0;
				} else {
					PART_FILTER = 9;
				}
				initializeVerovioNotation();
				break;

			case EKey:
				expandIncipit();
				break;

			case OKey:
				ORIGINAL_CLEFS = !ORIGINAL_CLEFS;
				initializeVerovioNotation();
				break;

			case LeftArrowKey:
				displayPreviousWork();
				event.preventDefault();
				break;

			case RightArrowKey:
				displayNextWork();
				event.preventDefault();
				break;

			case UpArrowKey:
				if (event.shiftKey) {
					displayWorkList();
					event.preventDefault();
				}
				break;
		}
	}
);

</script>

